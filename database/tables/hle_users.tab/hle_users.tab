-- Stores user account information for all roles
CREATE TABLE hle_users (
    id                      NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    role_id                 NUMBER NOT NULL, -- Foreign key constraint komt later
    username                VARCHAR2(100) CONSTRAINT hle_users_username_uk UNIQUE NOT NULL,
    password_hash           VARCHAR2(255) NOT NULL,
    full_name               VARCHAR2(255),
    email                   VARCHAR2(255) CONSTRAINT hle_users_email_uk UNIQUE NOT NULL,
    phone_number            VARCHAR2(20),
    is_active               NUMBER(1) DEFAULT 1 NOT NULL
                            CONSTRAINT hle_users_active_chk CHECK (is_active IN (0, 1)), -- 0=false, 1=true
    registration_approved   NUMBER(1) DEFAULT 0 NOT NULL
                            CONSTRAINT hle_users_reg_appr_chk CHECK (registration_approved IN (0, 1)),
    approved_by_user_id     NUMBER, -- Foreign key constraint komt later
    created_at              TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL
);