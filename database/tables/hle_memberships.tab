-- Stores the membership history and status for each user
CREATE TABLE hle_memberships (
    id                   NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_id              NUMBER NOT NULL, -- FK constraint later
    membership_type_id   NUMBER NOT NULL, -- FK constraint later
    start_date           DATE NOT NULL,
    end_date             DATE NOT NULL,
    status               VARCHAR2(50) DEFAULT 'Pending' NOT NULL
                         CONSTRAINT hle_memberships_status_chk CHECK (status IN ('Pending', 'Active', 'Expired', 'Cancelled')),
    created_at           TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL
);